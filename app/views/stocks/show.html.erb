<h1><%= @stock.company_name %> (<%= @stock.symbol %>)</h1>

<%= link_to 'Home', root_path, class: 'btn btn-secondary' %>

<h2>Historical Prices</h2>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Open</th>
      <th>High</th>
      <th>Low</th>
      <th>Close</th>
      <th>Volume</th>
    </tr>
  </thead>
  <tbody>
    <% @historical_prices.each do |price| %>
      <tr>
        <td><%= price.date %></td>
        <td><%= number_to_currency(price.open) %></td>
        <td><%= number_to_currency(price.high) %></td>
        <td><%= number_to_currency(price.low) %></td>
        <td><%= number_to_currency(price.close) %></td>
        <td><%= number_with_delimiter(price.volume) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Predictions</h2>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Predicted Price</th>
      <th>Method</th>
    </tr>
  </thead>
  <tbody>
    <% @predictions.each do |prediction| %>
      <tr>
        <td><%= prediction.date %></td>
        <td><%= number_to_currency(prediction.predicted_price) %></td>
        <td><%= prediction.prediction_method %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Price Chart</h2>

<%= line_chart @historical_prices.map { |p| [p.date, p.close] }, height: '500px', library: { title: { text: 'Closing Prices' } } %>

<h2>Predicted Prices</h2>

<%= line_chart @predictions.map { |p| [p.date, p.predicted_price] }, height: '500px', library: { title: { text: 'Predicted Prices' } } %>
